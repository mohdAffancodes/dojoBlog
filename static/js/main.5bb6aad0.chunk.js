(this["webpackJsonpdojo-blog"]=this["webpackJsonpdojo-blog"]||[]).push([[0],{36:function(e,t,n){e.exports={notFound:"notfound_notFound__2JOlx",pulse:"notfound_pulse__4FxCZ"}},43:function(e,t,n){},44:function(e,t,n){},48:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var c=n(2),o=n(31),i=n.n(o),a=(n(42),n(43),n(44),n(9)),s=n(5),l=n(1),r=function(){return Object(l.jsx)("div",{className:"progress",children:Object(l.jsx)("div",{className:"indeterminate pink accent-3-only"})})},d=n(14),j=(n(48),function(e){var t=e.blogs;return Object(l.jsxs)("div",{className:"blog-list",children:[0===t.length&&Object(l.jsxs)("div",{children:[Object(l.jsx)("h3",{children:"No blogs"}),Object(l.jsx)("h4",{children:Object(l.jsx)(a.b,{to:"/dojoBlog/create",children:"Create One Now"})})]}),t.length>0&&Object(l.jsxs)("h3",{children:["All blogs",Object(l.jsx)(a.b,{to:"/dojoBlog/create",style:{backgroundColor:"#f1356d",borderRadius:"8px",textTransform:"none"},className:"myTabs waves-effect waves-light btn white-text new hide-on-small-only",children:"New Blog"}),Object(l.jsx)(a.b,{to:"/dojoBlog/create",style:{backgroundColor:"#f1356d"},className:"myTabs waves-effect waves-light btn white-text newfloater hide-on-med-and-up",children:Object(l.jsx)("i",{className:"material-icons",style:{fontSize:"40px"},children:"add"})})]}),t.map((function(e,t){return Object(l.jsx)(a.b,{to:"/dojoBlog/blogs/".concat(t),children:Object(l.jsxs)("div",{className:"blog-preview",children:[Object(l.jsx)("h2",{children:e.title}),Object(l.jsxs)("p",{children:["Written by ",e.author]})]})},e.id)}))]})}),u=n(37),b=n(6),h=n(21);n(71);h.a.apps.length?h.a.app():h.a.initializeApp({apiKey:"AIzaSyAKfnfgEx5EW76s-9ui9ByEynjgXYNM1nQ",authDomain:"dojoblog-ec6b1.firebaseapp.com",projectId:"dojoblog-ec6b1",storageBucket:"dojoblog-ec6b1.appspot.com",messagingSenderId:"683122392119",appId:"1:683122392119:web:3c4f1db62a0ba37da853b2",measurementId:"G-M6MQ4XJKQ6"}),h.a.firestore().settings({timeStampsInSnapshots:!0});var O=h.a.firestore(),f=function(e,t){switch(t.type){case"idle":return{status:"idle",data:void 0,error:void 0};case"loading":return{status:"loading",data:void 0,error:void 0};case"success":return{status:"success",data:t.payload,error:void 0};case"error":return{status:"error",data:void 0,error:t.payload};default:throw new Error("invalid action")}};function g(e,t){var n=O.collection(e).orderBy("createdAt","desc");t&&(n=O.collection(e).doc(t));var o={status:n?"loading":"idle",data:void 0,error:void 0},i=Object(c.useState)(null),a=Object(b.a)(i,2),s=a[0],l=a[1],r=Object(c.useReducer)(f,o),d=Object(b.a)(r,2),j=d[0],u=d[1],h=function(e,t){var n=Object(c.useRef)(),o=n.current,i=t(o,e);return Object(c.useEffect)((function(){i||(n.current=e)})),i?o:e}(n,(function(e){return e&&n&&n.isEqual(e)}));return Object(c.useEffect)((function(){if(h)return u({type:"loading"}),h.onSnapshot((function(e){e.docChanges().forEach((function(e){l([e.type,e.doc.id])}));var t=e.docs?function(e){return e.docs.map(x)}(e):x(e);u({type:"success",payload:t})}),(function(e){u({type:"error",payload:e})}));u({type:"idle"})}),[h]),{state:j,change:s}}function x(e){return!0===e.exists?Object(u.a)({id:e.id},e.data()):null}var m=n(16),p=n.n(m),v=Object(c.createContext)({user:null,login:function(){},logout:function(){},authReady:!1}),y=function(e){var t=e.children,n=Object(c.useState)(null),o=Object(b.a)(n,2),i=o[0],a=o[1],s=Object(c.useState)(!1),r=Object(b.a)(s,2),d=r[0],j=r[1];Object(c.useEffect)((function(){return p.a.on("login",(function(e){a(e),p.a.close(),console.log("login event")})),p.a.on("logout",(function(){a(null),console.log("logout event")})),p.a.on("init",(function(e){a(e),null===e&&u(),j(!0),console.log("init event")})),p.a.on("close",(function(){document.querySelector(".nav-fixed").style.zIndex=999})),p.a.init(),function(){p.a.off("login"),p.a.off("logout"),p.a.off("close")}}),[]);var u=function(){document.querySelector(".nav-fixed").style.zIndex=50,p.a.open()},h={user:i,login:u,logout:function(){p.a.logout()},authReady:d};return Object(l.jsx)(v.Provider,{value:h,children:t})},N=v,S=Object(c.createContext)(null);function w(e){var t=e.children,n=Object(c.useContext)(N).user,o="blog1";n&&(o=n.email);var i=g(o),a=i.state,s=i.change,r={data:a.data,status:a.status,error:a.error,change:s};return Object(l.jsx)(S.Provider,{value:r,children:t})}var C=function(){var e=Object(c.useContext)(N),t=e.user,n=(e.logout,e.login),o=Object(c.useContext)(S),i=o.data,a=o.status,s=o.error;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(d.a,{children:Object(l.jsx)("title",{children:"Dojo-Blog | Home"})}),Object(l.jsx)("div",{className:"home",children:t?Object(l.jsxs)(l.Fragment,{children:["error"===a&&Object(l.jsx)("div",{style:{fontSize:"20px",fontWeight:"700"},children:s.message}),"loading"===a&&Object(l.jsx)(r,{}),"success"===a&&Object(l.jsx)(j,{blogs:i})]}):Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("h3",{className:"center loginHeader",children:["Please ",Object(l.jsx)("span",{onClick:n,children:"Login/Signup"})," to proceed"]})})})]})},B=(n(51),n(20)),q=n.n(B),k=function(){var e=Object(c.useContext)(N),t=e.user,n=e.logout;return Object(l.jsxs)("section",{id:"nav",children:[Object(l.jsx)("div",{className:"navSpace"}),Object(l.jsx)("nav",{className:"nav-fixed",children:Object(l.jsxs)("div",{className:"nav-wrapper",children:[null!==t&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"user left dropdown-trigger","data-target":"dropdown1",onClick:function(){var e=document.querySelector(".dropdown-trigger");q.a.Dropdown.init(e,{}).open()},children:t.user_metadata.full_name[0]}),Object(l.jsx)("ul",{id:"dropdown1",className:"dropdown-content",children:Object(l.jsx)("li",{children:Object(l.jsx)("a",{href:"#Logout",onClick:n,children:"Logout"})})})]}),Object(l.jsx)(a.b,{to:"/dojoBlog/",className:"brandLogo",children:"Dojo Blog"}),Object(l.jsxs)("ul",{id:"nav-mobile",className:"right",children:[Object(l.jsx)("li",{children:Object(l.jsxs)(a.b,{to:"/dojoBlog",className:"myTabs navIcons",children:[Object(l.jsx)("i",{className:"material-icons",style:{fontSize:"30px"},children:"home"}),Object(l.jsx)("span",{className:"hide-on-small-only",children:"Home"})]})}),Object(l.jsx)("li",{children:Object(l.jsx)(a.b,{to:"/dojoBlog/contact",className:"myTabs navIcons call",children:Object(l.jsx)("i",{className:"material-icons",style:{fontSize:"30px"},children:"call"})})})]})]})})]})},E=(n(52),function(e){var t=e.alignment;return Object(l.jsx)("span",{className:"loader "+t,children:Object(l.jsx)("span",{className:"loader-inner"})})}),I=(n(53),n(54),function(){var e=Object(s.f)(),t=Object(c.useState)(""),n=Object(b.a)(t,2),o=n[0],i=n[1],a=Object(c.useState)(""),r=Object(b.a)(a,2),j=r[0],u=r[1],h=Object(c.useState)(!1),f=Object(b.a)(h,2),g=f[0],x=f[1],m=function(){var e=document.querySelector(".modal");q.a.Modal.init(e).open()};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(d.a,{children:Object(l.jsx)("title",{children:"Dojo-Blog | Contact"})}),Object(l.jsxs)("div",{className:"contact",children:[Object(l.jsx)("section",{className:"infomodal",children:Object(l.jsxs)("div",{id:"modal3",className:"modal",children:[Object(l.jsxs)("div",{className:"modal-content",children:[Object(l.jsx)("h3",{id:"info-modal-heading",style:{color:"#f1356d"},children:"Thanks"}),Object(l.jsx)("p",{className:"info-modal-heading",children:"I hope to read your message soon"})]}),Object(l.jsx)("div",{className:"modal-footer",children:Object(l.jsx)("a",{href:"#",className:"modal-close waves-effects btn-flat",children:Object(l.jsx)("i",{className:"material-icons closeIcon",style:{fontSize:"30px"},onClick:function(){setTimeout(e.push("/dojoBlog"),500)},children:"close"})})})]})}),Object(l.jsxs)("section",{id:"form",children:[Object(l.jsx)("h2",{children:"Contact Me"}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),x(!0),O.collection("messages").add({email:o,message:j}).then((function(){m(),x(!1)}))},children:[Object(l.jsx)("input",{type:"email",name:"email",className:"emailInput",required:!0,placeholder:"Email Address",onChange:function(e){i(e.target.value)},disabled:g}),Object(l.jsx)("input",{type:"text",name:"message",className:"messageInput",required:!0,placeholder:"Your Message",onChange:function(e){u(e.target.value)},disabled:g}),g?Object(l.jsx)(E,{alignment:"right"}):Object(l.jsx)("button",{type:"submit",className:"right waves-effect waves-light",disabled:g,children:"Send"})]})]})]})]})}),z=n(35),F=(n(60),n(61),document.createElement("i"));F.textContent="rotate_left",F.setAttribute("class","material-icons");var T=document.createElement("i");T.textContent="rotate_right",T.setAttribute("class","material-icons");var A=function(e){var t=e.id,n=e.placeholder,o=e.data,i=e.enable,a=Object(c.useState)(!0),s=Object(b.a)(a,2),r=s[0],d=s[1],j=Object(z.a)({placeholder:n,modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block","formula"],["link","image","video"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],[{size:["small",!1,"large","huge"]},{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],["clean"],["undo","redo"],[{direction:"rtl"}]]},formats:["redo","undo","bold","header","italic","align","color","script","strike","size","formula","background","code-block","font","underline","link","list","blockquote","image","video","indent","direction"]}),u=j.quill,h=j.quillRef,O=Object(c.useCallback)((function(e){document.querySelector(e).addEventListener("click",(function(){return".ql-undo"===e?u.history.undo():".ql-redo"===e?u.history.redo():void 0}))}),[u]);return Object(c.useEffect)((function(){u&&u.enable(i)}),[u,i]),Object(c.useEffect)((function(){u&&(document.querySelector(".ql-undo").appendChild(F),document.querySelector(".ql-redo").appendChild(T),O(".ql-undo"),O(".ql-redo"))}),[u,O]),Object(c.useEffect)((function(){d(!0)}),[o]),o&&u&&!0===r?(u.setContents(JSON.parse(o)),d(!1)):window.quill=u,Object(l.jsx)("div",{id:t,children:Object(l.jsx)("div",{ref:h})})},D=(n(62),n(30)),M=function(){var e=Object(c.useContext)(N).user,t=Object(s.f)(),n=Object(c.useState)(""),o=Object(b.a)(n,2),i=o[0],a=o[1],r=Object(c.useState)(""),j=Object(b.a)(r,2),u=j[0],h=j[1],f=Object(c.useState)(!0),g=Object(b.a)(f,2),x=g[0],m=g[1],p=Object(c.useState)(!1),v=Object(b.a)(p,2),y=v[0],S=v[1];return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(d.a,{children:Object(l.jsx)("title",{children:"Dojo-Blog | Create"})}),Object(l.jsxs)("div",{className:"create",children:[Object(l.jsx)("h3",{className:"add",children:"Add a new blog"}),Object(l.jsxs)("form",{onSubmit:function(n){n.preventDefault();var c,o=window.quill.getContents(),a=o.ops,s=document.querySelector(".ql-container").textContent;!1===function(e){var t=!1;function n(e,t){var n=Object.keys(e).sort(),c=Object.keys(t).sort();return JSON.stringify(n)===JSON.stringify(c)}for(var c=0;c<e.length;c++)(n(e[c].insert,{video:""})||n(e[c].insert,{image:""}))&&(t=!0);return t}(a)&&(""===s&&"\n"===a[0].insert||""===s)?function(){var e={ops:[{attributes:{size:"large",color:"#a10000",bold:!0},insert:"Please Fill this"},{attributes:{align:"center",header:1},insert:"\n"}]};window.quill.setContents(e)}():D.check(s)?function(){var e={ops:[{attributes:{size:"large",color:"#a10000",bold:!0},insert:"This IS  Prohibited"},{attributes:{align:"center",header:1},insert:"\n"}]};window.quill.setContents(e)}():(S(!0),m(!1),"Please Fill this"===s?(S(!1),t.push("/dojoBlog")):(c=o,O.collection(e.email).add({createdAt:Date.now(),title:i,body:JSON.stringify(c),author:u}).then((function(){m(!0),S(!1),t.push("/dojoBlog")}))))},children:[Object(l.jsx)("label",{children:"Blog title:"}),Object(l.jsx)("input",{type:"text",required:!0,value:i,onChange:function(e){D.check(e.target.value)?a(""):a(e.target.value)},className:"titleInput",disabled:y}),Object(l.jsx)("h6",{children:"Blog body:"}),Object(l.jsx)(A,{id:"ql-parent",placeholder:"Compose an epic",enable:x}),Object(l.jsx)("label",{style:{marginTop:"10px"},children:"Blog author:"}),Object(l.jsx)("input",{type:"text",required:!0,value:u,onChange:function(e){D.check(e.target.value)?h(""):h(e.target.value)},className:"authorInput",disabled:y}),y?Object(l.jsx)(E,{}):Object(l.jsx)("button",{className:"waves-effect waves-light addBlog",children:"Add Blog"})]})]})]})},_=n(36),J=n.n(_),P=function(){var e=Object(s.f)();return Object(c.useEffect)((function(){setTimeout((function(){e.push("/dojoBlog")}),2e3)}),[e]),Object(l.jsxs)("div",{className:J.a.notFound,children:[Object(l.jsx)(d.a,{children:Object(l.jsx)("title",{children:"Dojo-Blog | 404"})}),Object(l.jsx)("h2",{children:"Sorry"}),Object(l.jsx)("p",{children:"That page cannot be found"}),Object(l.jsx)(a.b,{to:"/dojoBlog",children:"Back to the homepage..."})]})},L=(n(69),n(30)),R=function(e,t){switch(t.type){case"save":return{editable:!1,fired:!0,updating:!0,deleting:!1};case"reset":case"updated":return{editable:!1,fired:!0,updating:!1,deleting:!1};case"delete":return{editable:!1,fired:!0,updating:!1,deleting:!0};case"initialLoad":return{editable:!1,fired:!0,updating:!1,deleting:!1};case"edit":return{editable:!0,fired:!0,updating:!1,deleting:!1};default:return e}},W=function(){var e=Object(c.useContext)(N).user,t=Object(c.useReducer)(R,{editable:!1,fired:!1,updating:!1,deleting:!1}),n=Object(b.a)(t,2),o=n[0],i=o.editable,j=o.fired,u=o.updating,h=o.deleting,f=n[1],g=Object(s.g)().id,x=Object(s.f)(),m=Object(c.useState)(null),p=Object(b.a)(m,2),v=p[0],y=p[1],w=Object(c.useContext)(S),C=w.data,B=w.status,k=w.error,E=w.change,I=E[0],z=E[1];Object(c.useEffect)((function(){!1===h&&("modified"===I&&z===C[g].id?y(C[g]):"removed"===I&&z===C[g].id&&!1===h?F():j||y(C[g]))}),[C,g,j,I,z,h]),Object(c.useEffect)((function(){f({type:"initialLoad"})}),[]);var F=function(){var e=document.querySelector(".modal");q.a.Modal.init(e).open(),document.querySelector(".editIcon").style.pointerEvents="none",document.querySelector(".deleteIcon").style.pointerEvents="none"};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(d.a,{children:v&&Object(l.jsxs)("title",{children:[v.title," | Dojo-Blog"]})}),Object(l.jsxs)("div",{className:"blog-details",children:[u&&Object(l.jsx)("h2",{children:"Saving Changes"}),(u||"loading"===B)&&Object(l.jsx)(r,{}),k&&Object(l.jsx)("div",{style:{fontSize:"20px",fontWeight:"700"},children:k}),v&&!u&&Object(l.jsxs)("article",{children:[Object(l.jsxs)("h2",{children:[Object(l.jsx)("span",{id:"title",children:v.title}),Object(l.jsx)("i",{className:"material-icons right deleteIcon",style:{cursor:"pointer",fontSize:"40px"},onClick:function(){f({type:"delete"}),O.collection(e.email).doc(C[g].id).delete().then((function(){x.push("/dojoBlog")}))},children:"delete"})]}),Object(l.jsx)("h6",{style:{marginBottom:"0.766667rem !important"},children:Object(l.jsxs)("span",{id:"author",children:["Written by ",v.author]})}),Object(l.jsx)(A,{id:"blogBody",data:v.body,enable:i})]}),"success"===B&&!u&&Object(l.jsx)("div",{className:"floater",children:Object(l.jsx)("i",{className:"material-icons editIcon",onClick:function(t){var n=(t=t||window.event).target||t.srcElement,c=document.querySelector("#title"),o=document.querySelector("#blogBody .ql-toolbar"),i=document.querySelector("#blogBody .ql-container").textContent;if("edit"===n.textContent)return c.contentEditable=!0,n.textContent="check",o.style.visibility="visible",o.style.setProperty("height","initial"),void f({type:"edit"});if("check"===n.textContent)return c.contentEditable=!0,n.textContent="edit",o.style.visibility="hidden",o.style.height="0px",void(L.check(i)||L.check(c.textContent)?(alert("This Is Prohibited"),x.push("/dojoBlog")):(!function(){var t=JSON.stringify(window.quill.getContents());O.collection(e.email).doc(C[g].id).update({body:t,title:c.textContent}).then((function(){f({type:"updated"})}))}(),f({type:"save"})))},style:{fontSize:"30px"},children:"edit"})}),Object(l.jsx)("section",{className:"infomodal",children:Object(l.jsxs)("div",{id:"modal3",className:"modal",children:[Object(l.jsxs)("div",{className:"modal-content",children:[Object(l.jsx)("h3",{id:"info-modal-heading",style:{color:"#f1356d"},children:"Message"}),Object(l.jsx)("p",{className:"info-modal-heading",children:"This Blog has been deleted.You will now be redirected to HOME."})]}),Object(l.jsx)("div",{className:"modal-footer",children:Object(l.jsx)(a.b,{to:"/dojoBlog",className:"modal-close waves-effects btn-flat",children:Object(l.jsx)("i",{className:"material-icons closeIcon",style:{fontSize:"30px"},children:"close"})})})]})})]})]})};var H=function(){return Object(l.jsx)(a.a,{children:Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(k,{}),Object(l.jsx)("div",{className:"content",children:Object(l.jsxs)(s.c,{children:[Object(l.jsx)(s.a,{exact:!0,path:"/dojoBlog",children:Object(l.jsx)(C,{})}),Object(l.jsx)(s.a,{exact:!0,path:"/dojoBlog/create",children:Object(l.jsx)(M,{})}),Object(l.jsx)(s.a,{exact:!0,path:"/dojoBlog/contact",children:Object(l.jsx)(I,{})}),Object(l.jsx)(s.a,{exact:!0,path:"/dojoBlog/blogs/:id",children:Object(l.jsx)(W,{})}),Object(l.jsx)(s.a,{path:"*",children:Object(l.jsx)(P,{})})]})})]})})},K=function(){return Object(l.jsx)(d.b,{children:Object(l.jsx)(y,{children:Object(l.jsx)(w,{children:Object(l.jsx)(H,{})})})})};i.a.render(Object(l.jsx)(c.StrictMode,{children:Object(l.jsx)(K,{})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.5bb6aad0.chunk.js.map